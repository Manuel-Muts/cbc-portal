<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Learner - COMPETENCE HUB</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/student.css" />
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1077/1077012.png" />
</head>
<body>
  <div id="toastMessage" style="
  display:none;
  position: fixed;
  top: 15px;
  left: 50%;
  transform: translateX(-50%);
  background: #2ecc71;
  color: white;
  padding: 10px 20px;
  border-radius: 8px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  font-weight: 500;
  z-index: 9999;
  transition: opacity 0.6s ease;
"></div>
  <aside class="sidebar">
    <h2>LEARNER'S Portal</h2>
    <ul>
      <li class="active"><a href="#">ğŸ  Dashboard</a></li>
      <li><a href="#">ğŸ“ˆ My Performance</a></li>
      <li><a href="studentstudymaterial.html">ğŸ“š Study Materials/Assignments</a></li>

    </ul>
  </aside>

  <main class="dashboard-main">
    <header class="dashboard-header">
      <div class="welcome-banner">Welcome, <span id="welcomeName">Learner</span></div>
      <div class="toolbar">
        <button id="refreshBtn" class="btn small primary">Refresh</button>
        <button id="viewFeeBtn" class="btn small" style="margin-right:8px;">View Fee Structure</button>
        <button id="logoutBtn" class="btn small danger">Logout</button>
      </div>
    </header>

<div id="loadingSpinner" style="
  display:none;
  text-align:center;
  padding:20px;
  font-size:18px;
  font-weight:bold;
">
  Loading marks...
</div>

<!-- Learner Info Display -->
<div id="learnerInfoDisplay" style="
  margin-bottom: 20px;
  padding: 15px;
  background: #f9f9f9;
  border-radius: 8px;
  border-left: 4px solid #3498db;
">
  <p style="margin: 5px 0;"><strong>Grade:</strong> <span id="learnerGradeDisplay">Loading...</span></p>
  <p style="margin: 5px 0;"><strong>Stream:</strong> <span id="learnerStreamDisplay">N/A</span></p>
</div>

      <div class="filter-bar">
  <label for="termFilter">
    Term:
    <select id="termFilter">
      <option value="all">All</option>
      <option value="1">Term 1</option>
      <option value="2">Term 2</option>
      <option value="3">Term 3</option>
    </select>
  </label>

  <label for="yearFilter">
    Year:
    <select id="yearFilter">
      <option value="all">All</option>
      <!-- Populated dynamically via JS -->
    </select>
  </label>

  <label for="assessmentFilter">
    Assessment:
    <select id="assessmentFilter">
      <option value="all">All</option>
      <option value="1">Assessment 1</option>
      <option value="2">Assessment 2</option>
      <option value="3">Assessment 3</option>
      <option value="4">Assessment 4</option>
      <option value="5">End Term</option>
    </select>
  </label>

  <button id="applyFiltersBtn" class="btn small primary">Apply Filters</button>
</div>

      <div id="learnerMarks">Loading...</div>

      <div class="report-actions">
        <button class="btn primary" onclick="window.location.href='report.html'">View Report Form</button>
      </div>
    </section>
  </main>

  <!-- Fee modal -->
  <div id="feeModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content" style="width:90%; max-width:800px; max-height:80vh; overflow-y:auto;">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem;">
        <h3 style="margin:0;">My Fee Structure</h3>
        <div>
          <button id="downloadFeeStructurePDF" class="btn small" style="margin-right: 10px;">ğŸ“„ Fee Structure PDF</button>
          <button id="downloadFeeStatementPDF" class="btn small" style="margin-right: 10px;">ğŸ“„ Fee Statement PDF</button>
          <button class="cancel-btn" onclick="document.getElementById('feeModal').classList.add('hidden')">Close</button>
        </div>
      </div>
      <div style="margin-bottom: 15px;">
        <label for="feeYearFilter" style="font-weight: bold;">Academic Year:</label>
        <select id="feeYearFilter" style="margin-left: 10px; padding: 5px;">
          <!-- Populated dynamically via JS -->
        </select>
        <button id="feeFilterBtn" class="btn small" style="margin-left: 10px;">Filter</button>
      </div>
      <div id="feeModalBody">Loading...</div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="js/student.js"></script>
</body>
</html>
