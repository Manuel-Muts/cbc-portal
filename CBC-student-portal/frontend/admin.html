<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard - CBC Portal</title>
<link rel="stylesheet" href="css/admin.css">
<link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1077/1077012.png" />
</head>
<body>

<main class="admin-wrap">

  <header class="dashboard-header">
    <h2>Admin Dashboard</h2>
    <div class="toolbar">
      <button id="logoutBtn" class="danger">Logout</button>
      <button id="refreshBtn" class="refresh-btn">ðŸ”„ Refresh Data</button>
    </div>
  </header>

  <!-- ================== REGISTER USER ================== -->
  <section class="allocation-section">
    <h3>Register New User</h3>

    <form id="registerForm">

      <div class="form-flex-row">
        <div>
          <label for="userRole">Role:</label>
          <select id="userRole" required>
            <option value="">-- Select Role --</option>
            <option value="teacher">Teacher</option>
            <option value="student">Student</option>
          </select>
        </div>

        <div>
          <label for="userName">Full Name:</label>
          <input type="text" id="userName" placeholder="Emmanuel Gitonga" required>
        </div>
      </div>

      <div class="form-flex-row">
        <div>
          <label for="userEmail">Email (teachers only):</label>
          <input type="email" id="userEmail" placeholder="teacher@example.com">
        </div>

        <div>
          <label for="userAdmission">Admission/ID (students only):</label>
          <input type="text" id="userAdmission" placeholder="S1234">
        </div>
      </div>

      <div class="button-row">
        <button type="submit" class="primary">Register User</button>
      </div>
    </form>

    <div id="registerFeedback" class="feedback" style="display:none;"></div>

    <input type="text" id="userSearchInput" placeholder="Search users by name or role">

    <table id="usersTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Role</th>
          <th>Email/Admission</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <button id="exportUsersBtn" class="export-btn">Export Users to PDF</button>
  </section>

  <!-- ================== SUBJECT ALLOCATION ================== -->
  <section class="allocation-section">
    <h3>Allocate Subjects to Teacher</h3>

    <form id="subjectAllocForm">

      <div class="form-flex-row">
        <div>
          <label for="teacherSelect">Select Teacher:</label>
          <select id="teacherSelect" required></select>
        </div>

        <div>
          <label for="gradeRange">Select Grade Range:</label>
          <select id="gradeRange" required>
            <option value="">-- Select Range --</option>
            <option value="1-3">Grades 1-3</option>
            <option value="4-6">Grades 4-6</option>
            <option value="7-9">Grades 7-9</option>
          </select>
        </div>
      </div>

      <label for="gradesSelect">Select Grades:</label>
      <div class="multi-select-wrapper">
        <button type="button" id="selectAllGradesBtn">Select All</button>
        <button type="button" id="deselectAllGradesBtn">Deselect All</button>
        <select id="gradesSelect" multiple required></select>
      </div>

      <label for="subjectsSelect">Select Subjects:</label>
      <div class="multi-select-wrapper">
        <button type="button" id="selectAllSubjectsBtn">Select All</button>
        <button type="button" id="deselectAllSubjectsBtn">Deselect All</button>
        <select id="subjectsSelect" multiple required></select>
      </div>

      <div class="button-row">
        <button type="submit">Save Allocation</button>
      </div>
    </form>

    <input type="text" id="subjectSearchInput" placeholder="Search subjects or teacher name">

    <table id="subjectAllocTable">
      <thead>
        <tr>
          <th>Teacher</th>
          <th>Grades</th>
          <th>Subjects</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <button id="exportSubjectsBtn" class="export-btn">Export Subjects to PDF</button>
  </section>

  <!-- ================== CLASS TEACHER ASSIGNMENT ================== -->
  <section class="allocation-section">
    <h3>Assign Class Teacher</h3>

    <form id="classAllocForm">
      <div class="form-flex-row">
        <div>
          <label for="classTeacherSelect">Select Teacher:</label>
          <select id="classTeacherSelect" required></select>
        </div>

        <div>
          <label for="classGradeSelect">Assign to Grade:</label>
          <select id="classGradeSelect" required>
            <option value="">-- Select Grade --</option>
            <option value="1">Grade 1</option>
            <option value="2">Grade 2</option>
            <option value="3">Grade 3</option>
            <option value="4">Grade 4</option>
            <option value="5">Grade 5</option>
            <option value="6">Grade 6</option>
            <option value="7">Grade 7</option>
            <option value="8">Grade 8</option>
            <option value="9">Grade 9</option>
          </select>
        </div>
      </div>

      <div class="button-row">
        <button type="submit">Save Class Teacher</button>
      </div>
    </form>

    <input type="text" id="classSearchInput" placeholder="Search class teacher or grade">

    <table id="classAllocTable">
      <thead>
        <tr>
          <th>Teacher</th>
          <th>Grade</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <button id="exportClassBtn" class="export-btn">Export Class Teachers to PDF</button>
  </section>

</main>

<script src="http://localhost:5000/js/email.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
<script src="js/admin.js"></script>

</body>
</html>
